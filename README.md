Описание ДЗ 6

1)Разница между методами получения шелла в процессе загрузки

Способ 1. init=/bin/sh

Отличительной чертой является попадание в шелл в режиме Read-Only, поскольу в настройках grub mode не удален параметр ro, который дает права только для чтения. При использрвании данного метода необходимо перемонтирование корневой файловой системы для настройки привилегии на чтение.

Способ 2. rd.break 

После попадания в Emergency mode необходимо перемонтирвать /sysroot с правами на чтении с целью смены парол. При использрвании данного метода также необходимо.

Способ 3. rw init=/sysroot/bin/sh

Данный метод является для меня сам предпочитаемым. Самое важное отличие в том что, мы заменяем данную команду на ro, и поэтому попадаем в корневую файловую систему с правами на чтение.

2)Установка Centos 7 на ВМ и переименование VG в LVM

Осуществляем смену имени группы томов centos (VG) на OtusRoot с помощью команды vgrename.

[root@localhost ~]# vgrename centos OtusRoot

  Volume group "centos" successfully renamed to "OtusRoot"
  
После чего меняем во всех трех файлах конфигурации(/etc/fstab,/etc/default/grub,/boot/grub2/grub.cfg)grub имя centos VG на обнавленное имя OtusRoot.

Далее обновляем настройки initrd, который предназначен для загрузки корневой файловой системы

[root@localhost ~]# mkinitrd -f -v /boot/initramfs-$(uname -r).img $(uname -r)

После успешной перезагрузки можно проверить применились ли изменения по смене имени VG.

[root@localhost ~]# vgs

  VG     #PV #LV #SN Attr   VSize   VFree
  
  OtusRoot   1   2   0 wz--n- <15.00g    0 
